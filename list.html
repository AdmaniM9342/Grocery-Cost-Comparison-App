<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Selector</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="landingstyle.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
</head>
<body>
    <header>
        <h1 >GrocerySaver</h1>
        <nav>
            <a href="index.html" id="clickable-heading" class="nav-link">Home</a>
            <a href="#" class="nav-link">Contact</a>
        </nav>
    </header>
    <h1 >Select Items</h1>
    <form id="itemForm">
        <ul id="itemList">
            <!-- List of items will be dynamically added here -->
        </ul>
        <button type="button" onclick="submitSelection()">Submit</button>
    </form>
    <div id="priceListModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="priceList"></div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const items = [
                { name: 'Soda', price: 1.5 },
                { name: 'Milk', price: 2 },
                { name: 'Chips', price: 1.2 },
                // Add more items here with prices
            ];

            const itemList = document.getElementById('itemList');

            items.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <label>
                        <input type="checkbox" data-index="${index}" onchange="updateTotal()">
                        ${item.name} - $${item.price.toFixed(2)}
                    </label>
                    <button type="button" onclick="changeQuantity(${index}, -1)">-</button>
                    <span id="quantity-${index}">0</span>
                    <button type="button" onclick="changeQuantity(${index}, 1)">+</button>
                `;
                itemList.appendChild(li);
            });
        });

        function changeQuantity(index, delta) {
            const quantityElem = document.getElementById(`quantity-${index}`);
            let quantity = parseInt(quantityElem.textContent);
            quantity = Math.max(0, quantity + delta); // Prevent negative quantity
            quantityElem.textContent = quantity;
            updateTotal();
        }

        function updateTotal() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const items = [
                { name: 'Soda', price: 1.5 },
                { name: 'Milk', price: 2 },
                { name: 'Chips', price: 1.2 },
                // Add more items here with prices
            ];
            
            let total = {
                HEB: 0,
                Walmart: 0,
                Target: 0,
                Randalls: 0,
                Kroger: 0,
                Fiesta: 0
            };

            checkboxes.forEach((checkbox, index) => {
                if (checkbox.checked) {
                    const quantity = parseInt(document.getElementById(`quantity-${index}`).textContent);
                    const item = items[index];
                    
                    // Update totals for each store
                    total.HEB += item.price * quantity;
                    total.Walmart += item.price * quantity * 0.95; // Assume Walmart is 5% cheaper
                    total.Target += item.price * quantity * 1.02; // Assume Target is 2% more expensive
                    total.Randalls += item.price * quantity * 1.05; // Assume Randalls is 5% more expensive
                    total.Kroger += item.price * quantity * 1.03; // Assume Kroger is 3% more expensive
                    total.Fiesta += item.price * quantity * 0.98; // Assume Fiesta is 2% cheaper
                }
            });

            const cheapestStore = Object.keys(total).reduce((a, b) => total[a] < total[b] ? a : b);

            alert(`Total for HEB: $${total.HEB.toFixed(2)}
Total for Walmart: $${total.Walmart.toFixed(2)}
Total for Target: $${total.Target.toFixed(2)}
Total for Randalls: $${total.Randalls.toFixed(2)}
Total for Kroger: $${total.Kroger.toFixed(2)}
Total for Fiesta: $${total.Fiesta.toFixed(2)}
Cheapest store: ${cheapestStore}`);
        }

        function submitSelection() {
            updateTotal();
        }
    </script>
</body>
</html>
